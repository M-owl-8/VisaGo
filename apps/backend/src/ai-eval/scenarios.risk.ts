/**
 * Risk Explanation Evaluation Scenarios
 * Hard-coded test cases for risk explanation subsystem
 */

import { RiskEvalScenario } from './types';

export const RISK_SCENARIOS: RiskEvalScenario[] = [
  {
    id: 'risk-001',
    name: 'Very strong applicant profile',
    description: 'Applicant with strong finances, strong ties, travel history, no red flags',
    subsystem: 'risk',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-risk-001',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 32,
      },
      application: {
        applicationId: 'test-app-risk-001',
        visaType: 'tourist' as const,
        country: 'US',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 32,
        visaType: 'tourist' as const,
        targetCountry: 'US',
        duration: '1_3_months' as const,
        sponsorType: 'self' as const,
        bankBalanceUSD: 15000,
        monthlyIncomeUSD: 3000,
        currentStatus: 'employed' as const,
        isStudent: false,
        isEmployed: true,
        hasInternationalTravel: true,
        previousVisaRejections: false,
        previousOverstay: false,
        hasPropertyInUzbekistan: true,
        hasFamilyInUzbekistan: true,
        maritalStatus: 'married' as const,
        hasChildren: true,
        hasUniversityInvitation: false,
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: true,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 3000,
          financialSufficiencyRatio: 5.0, // 500% - very strong
          savingsGrowth: 'increasing' as const,
        },
        employment: {
          employerName: 'Established Company',
          employmentDurationMonths: 60,
          employerStability: 'established_company' as const,
        },
        ties: {
          tiesStrengthScore: 0.9, // Very strong ties
          tiesFactors: {
            property: 0.3,
            employment: 0.3,
            family: 0.2,
            children: 0.2,
          },
        },
      },
      riskScore: {
        probabilityPercent: 85,
        level: 'high' as const,
        riskFactors: [],
        positiveFactors: [
          'Strong finances',
          'Strong ties',
          'Travel history',
          'Employed',
          'Has property',
          'Has children',
        ],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    expectedRiskLevel: 'low',
    expectedConstraints: {
      riskLevelMatches: true,
      summaryEnNonEmpty: true,
      summaryUzNonEmpty: true,
      summaryRuNonEmpty: true,
      recommendationsCount: { min: 2, max: 4 },
      recommendationsMentionFactors: true,
      factorWeightsPresent: true,
    },
  },
  {
    id: 'risk-002',
    name: 'Medium risk with one weakness',
    description: 'Applicant with mostly good profile but one significant weakness',
    subsystem: 'risk',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-risk-002',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 25,
      },
      application: {
        applicationId: 'test-app-risk-002',
        visaType: 'tourist' as const,
        country: 'DE',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 25,
        visaType: 'tourist' as const,
        targetCountry: 'DE',
        duration: '1_3_months' as const,
        sponsorType: 'self' as const,
        bankBalanceUSD: 2500, // Borderline
        monthlyIncomeUSD: 800,
        currentStatus: 'employed' as const,
        isStudent: false,
        isEmployed: true,
        hasInternationalTravel: false, // No travel history
        previousVisaRejections: false,
        previousOverstay: false,
        hasPropertyInUzbekistan: false, // No property
        hasFamilyInUzbekistan: true,
        maritalStatus: 'single' as const,
        hasChildren: false,
        hasUniversityInvitation: false,
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: true,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 2000,
          financialSufficiencyRatio: 1.25, // 125% - borderline
          savingsGrowth: 'stable' as const,
        },
        ties: {
          tiesStrengthScore: 0.4, // Moderate ties
          tiesFactors: {
            property: 0.0,
            employment: 0.2,
            family: 0.2,
            children: 0.0,
          },
        },
      },
      riskScore: {
        probabilityPercent: 60,
        level: 'medium' as const,
        riskFactors: ['No travel history', 'No property', 'Borderline finances'],
        positiveFactors: ['Employed', 'Has family'],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    expectedRiskLevel: 'medium',
    expectedConstraints: {
      riskLevelMatches: true,
      summaryEnNonEmpty: true,
      summaryUzNonEmpty: true,
      summaryRuNonEmpty: true,
      recommendationsCount: { min: 2, max: 4 },
      recommendationsMentionFactors: true,
      factorWeightsPresent: true,
    },
  },
  {
    id: 'risk-003',
    name: 'High risk (weak ties, low funds)',
    description: 'Applicant with multiple risk factors: weak ties and insufficient funds',
    subsystem: 'risk',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-risk-003',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 22,
      },
      application: {
        applicationId: 'test-app-risk-003',
        visaType: 'tourist' as const,
        country: 'UK',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 22,
        visaType: 'tourist' as const,
        targetCountry: 'UK',
        duration: '1_3_months' as const,
        sponsorType: 'self' as const,
        bankBalanceUSD: 800, // Very low
        monthlyIncomeUSD: 400,
        currentStatus: 'student' as const,
        isStudent: true,
        isEmployed: false,
        hasInternationalTravel: false,
        previousVisaRejections: false,
        previousOverstay: false,
        hasPropertyInUzbekistan: false,
        hasFamilyInUzbekistan: false, // No family ties
        maritalStatus: 'single' as const,
        hasChildren: false,
        hasUniversityInvitation: false,
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: false,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 4000,
          financialSufficiencyRatio: 0.2, // 20% - very insufficient
          savingsGrowth: 'decreasing' as const,
        },
        ties: {
          tiesStrengthScore: 0.1, // Very weak ties
          tiesFactors: {
            property: 0.0,
            employment: 0.0,
            family: 0.1,
            children: 0.0,
          },
        },
      },
      riskScore: {
        probabilityPercent: 25,
        level: 'low' as const,
        riskFactors: ['Insufficient funds', 'Weak ties', 'No travel history', 'Student status'],
        positiveFactors: [],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    expectedRiskLevel: 'high',
    expectedConstraints: {
      riskLevelMatches: true,
      summaryEnNonEmpty: true,
      summaryUzNonEmpty: true,
      summaryRuNonEmpty: true,
      recommendationsCount: { min: 3, max: 5 },
      recommendationsMentionFactors: true,
      factorWeightsPresent: true,
    },
  },
  {
    id: 'risk-004',
    name: 'Previous refusal case',
    description: 'Applicant with previous visa refusal but improved profile',
    subsystem: 'risk',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-risk-004',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 30,
      },
      application: {
        applicationId: 'test-app-risk-004',
        visaType: 'tourist' as const,
        country: 'CA',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 30,
        visaType: 'tourist' as const,
        targetCountry: 'CA',
        duration: '1_3_months' as const,
        sponsorType: 'self' as const,
        bankBalanceUSD: 10000,
        monthlyIncomeUSD: 2500,
        currentStatus: 'employed' as const,
        isStudent: false,
        isEmployed: true,
        hasInternationalTravel: true,
        previousVisaRejections: true, // Previous refusal
        previousOverstay: false,
        hasPropertyInUzbekistan: true,
        hasFamilyInUzbekistan: true,
        maritalStatus: 'married' as const,
        hasChildren: false,
        hasUniversityInvitation: false,
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: true,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 3000,
          financialSufficiencyRatio: 3.33,
          savingsGrowth: 'increasing' as const,
        },
        ties: {
          tiesStrengthScore: 0.7,
          tiesFactors: {
            property: 0.3,
            employment: 0.3,
            family: 0.1,
            children: 0.0,
          },
        },
      },
      riskScore: {
        probabilityPercent: 50,
        level: 'medium' as const,
        riskFactors: ['Previous visa refusal'],
        positiveFactors: [
          'Strong finances',
          'Strong ties',
          'Travel history',
          'Employed',
          'Has property',
        ],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    expectedRiskLevel: 'medium',
    expectedConstraints: {
      riskLevelMatches: true,
      summaryEnNonEmpty: true,
      summaryUzNonEmpty: true,
      summaryRuNonEmpty: true,
      recommendationsCount: { min: 2, max: 4 },
      recommendationsMentionFactors: true,
      factorWeightsPresent: true,
    },
  },
  {
    id: 'risk-005',
    name: 'Strong but no travel history',
    description: 'Applicant with strong finances and ties but no previous travel',
    subsystem: 'risk',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-risk-005',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 28,
      },
      application: {
        applicationId: 'test-app-risk-005',
        visaType: 'tourist' as const,
        country: 'AU',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 28,
        visaType: 'tourist' as const,
        targetCountry: 'AU',
        duration: '1_3_months' as const,
        sponsorType: 'self' as const,
        bankBalanceUSD: 12000,
        monthlyIncomeUSD: 2000,
        currentStatus: 'employed' as const,
        isStudent: false,
        isEmployed: true,
        hasInternationalTravel: false, // No travel history
        previousVisaRejections: false,
        previousOverstay: false,
        hasPropertyInUzbekistan: true,
        hasFamilyInUzbekistan: true,
        maritalStatus: 'married' as const,
        hasChildren: false,
        hasUniversityInvitation: false,
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: true,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 4000,
          financialSufficiencyRatio: 3.0,
          savingsGrowth: 'stable' as const,
        },
        ties: {
          tiesStrengthScore: 0.7,
          tiesFactors: {
            property: 0.3,
            employment: 0.3,
            family: 0.1,
            children: 0.0,
          },
        },
      },
      riskScore: {
        probabilityPercent: 70,
        level: 'high' as const,
        riskFactors: ['No travel history'],
        positiveFactors: ['Strong finances', 'Strong ties', 'Employed', 'Has property'],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    expectedRiskLevel: 'low',
    expectedConstraints: {
      riskLevelMatches: true,
      summaryEnNonEmpty: true,
      summaryUzNonEmpty: true,
      summaryRuNonEmpty: true,
      recommendationsCount: { min: 2, max: 4 },
      recommendationsMentionFactors: true,
      factorWeightsPresent: true,
    },
  },
];
