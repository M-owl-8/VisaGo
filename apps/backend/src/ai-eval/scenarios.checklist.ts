/**
 * Checklist Evaluation Scenarios
 * Hard-coded test cases for checklist enrichment subsystem
 */

import { ChecklistEvalScenario } from './types';

export const CHECKLIST_SCENARIOS: ChecklistEvalScenario[] = [
  {
    id: 'checklist-001',
    name: 'Low funds, self-sponsored, tourist, no travel history',
    description:
      'Applicant with low bank balance, self-sponsored, tourist visa, no previous travel',
    subsystem: 'checklist',
    countryCode: 'US',
    visaType: 'tourist',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-001',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 28,
      },
      application: {
        applicationId: 'test-app-001',
        visaType: 'tourist' as const,
        country: 'US',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 28,
        visaType: 'tourist' as const,
        targetCountry: 'US',
        duration: '1_3_months' as const,
        sponsorType: 'self' as const,
        bankBalanceUSD: 1500, // Low funds
        monthlyIncomeUSD: 500,
        currentStatus: 'employed' as const,
        isStudent: false,
        isEmployed: true,
        hasInternationalTravel: false, // No travel history
        previousVisaRejections: false,
        previousOverstay: false,
        hasPropertyInUzbekistan: false,
        hasFamilyInUzbekistan: true,
        maritalStatus: 'single' as const,
        hasChildren: false,
        hasUniversityInvitation: false,
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: false,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 3000,
          financialSufficiencyRatio: 0.5, // 50% - insufficient
          savingsGrowth: 'decreasing' as const,
        },
        ties: {
          tiesStrengthScore: 0.3, // Weak ties
          tiesFactors: {
            property: 0.0,
            employment: 0.2,
            family: 0.1,
            children: 0.0,
          },
        },
      },
      riskScore: {
        probabilityPercent: 45,
        level: 'medium' as const,
        riskFactors: ['Low bank balance', 'No travel history', 'Weak ties to home country'],
        positiveFactors: ['Employed'],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    baseDocuments: [
      { documentType: 'passport_international', category: 'required', required: true },
      { documentType: 'passport_photo', category: 'required', required: true },
      { documentType: 'visa_application_form', category: 'required', required: true },
      { documentType: 'bank_statements_applicant', category: 'required', required: true },
      { documentType: 'employment_letter', category: 'highly_recommended', required: false },
      { documentType: 'property_documents', category: 'optional', required: false },
    ],
    expectedConstraints: {
      mustNotAddDocuments: true,
      mustNotRemoveDocuments: true,
      mustProduceValidJson: true,
      shouldSetAppliesToThisApplicant: true,
      shouldGiveReasonIfApplies: true,
      minItems: 6,
    },
  },
  {
    id: 'checklist-002',
    name: 'Strong finances, sponsored by parent, weak ties',
    description: 'Applicant with strong finances but sponsored, weak ties to home country',
    subsystem: 'checklist',
    countryCode: 'DE',
    visaType: 'tourist',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-002',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 22,
      },
      application: {
        applicationId: 'test-app-002',
        visaType: 'tourist' as const,
        country: 'DE',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 22,
        visaType: 'tourist' as const,
        targetCountry: 'DE',
        duration: '1_3_months' as const,
        sponsorType: 'parent' as const,
        bankBalanceUSD: 8000,
        monthlyIncomeUSD: null,
        currentStatus: 'student' as const,
        isStudent: true,
        isEmployed: false,
        hasInternationalTravel: true,
        previousVisaRejections: false,
        previousOverstay: false,
        hasPropertyInUzbekistan: false,
        hasFamilyInUzbekistan: true,
        maritalStatus: 'single' as const,
        hasChildren: false,
        hasUniversityInvitation: false,
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: true,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 2000,
          financialSufficiencyRatio: 4.0, // 400% - very strong
          savingsGrowth: 'stable' as const,
          sponsor: {
            income: 50000,
            savings: 20000,
            relationship: 'parent' as const,
          },
        },
        ties: {
          tiesStrengthScore: 0.2, // Weak ties (student, no property)
          tiesFactors: {
            property: 0.0,
            employment: 0.0,
            family: 0.2,
            children: 0.0,
          },
        },
      },
      riskScore: {
        probabilityPercent: 65,
        level: 'medium' as const,
        riskFactors: ['Weak ties to home country', 'Student status'],
        positiveFactors: ['Strong finances', 'Travel history'],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    baseDocuments: [
      { documentType: 'passport_international', category: 'required', required: true },
      { documentType: 'passport_photo', category: 'required', required: true },
      { documentType: 'visa_application_form', category: 'required', required: true },
      { documentType: 'bank_statements_sponsor', category: 'required', required: true },
      { documentType: 'sponsor_letter', category: 'required', required: true },
      { documentType: 'sponsor_income_proof', category: 'highly_recommended', required: false },
      { documentType: 'travel_insurance', category: 'required', required: true },
      { documentType: 'property_documents', category: 'optional', required: false },
    ],
    expectedConstraints: {
      mustNotAddDocuments: true,
      mustNotRemoveDocuments: true,
      mustProduceValidJson: true,
      shouldSetAppliesToThisApplicant: true,
      shouldGiveReasonIfApplies: true,
      minItems: 8,
    },
  },
  {
    id: 'checklist-003',
    name: 'Student visa with strong invitation but low savings',
    description: 'Student visa applicant with university invitation but insufficient savings',
    subsystem: 'checklist',
    countryCode: 'US',
    visaType: 'student',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-003',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 20,
      },
      application: {
        applicationId: 'test-app-003',
        visaType: 'student' as const,
        country: 'US',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 20,
        visaType: 'student' as const,
        targetCountry: 'US',
        duration: 'more_than_1_year' as const,
        sponsorType: 'parent' as const,
        bankBalanceUSD: 5000, // Low for student visa
        monthlyIncomeUSD: null,
        currentStatus: 'student' as const,
        isStudent: true,
        isEmployed: false,
        hasInternationalTravel: false,
        previousVisaRejections: false,
        previousOverstay: false,
        hasPropertyInUzbekistan: false,
        hasFamilyInUzbekistan: true,
        maritalStatus: 'single' as const,
        hasChildren: false,
        hasUniversityInvitation: true, // Strong invitation
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: false,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 50000, // High requirement for student visa
          financialSufficiencyRatio: 0.1, // Only 10% - very insufficient
          savingsGrowth: 'stable' as const,
          sponsor: {
            income: 30000,
            savings: 10000,
            relationship: 'parent' as const,
          },
        },
        education: {
          degreeLevel: 'bachelor' as const,
          institution: 'Test University',
        },
      },
      riskScore: {
        probabilityPercent: 40,
        level: 'high' as const,
        riskFactors: ['Insufficient funds for student visa', 'Low financial sufficiency ratio'],
        positiveFactors: ['University invitation', 'Student status'],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    baseDocuments: [
      { documentType: 'passport_international', category: 'required', required: true },
      { documentType: 'passport_photo', category: 'required', required: true },
      { documentType: 'visa_application_form', category: 'required', required: true },
      { documentType: 'i20_form', category: 'required', required: true },
      { documentType: 'sevis_fee_receipt', category: 'required', required: true },
      { documentType: 'bank_statements_sponsor', category: 'required', required: true },
      { documentType: 'sponsor_letter', category: 'required', required: true },
      { documentType: 'university_acceptance_letter', category: 'required', required: true },
      { documentType: 'academic_transcripts', category: 'highly_recommended', required: false },
    ],
    expectedConstraints: {
      mustNotAddDocuments: true,
      mustNotRemoveDocuments: true,
      mustProduceValidJson: true,
      shouldSetAppliesToThisApplicant: true,
      shouldGiveReasonIfApplies: true,
      minItems: 9,
    },
  },
  {
    id: 'checklist-004',
    name: 'High risk (previous refusal), improved profile',
    description: 'Applicant with previous visa refusal but improved financial and ties profile',
    subsystem: 'checklist',
    countryCode: 'UK',
    visaType: 'tourist',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-004',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 35,
      },
      application: {
        applicationId: 'test-app-004',
        visaType: 'tourist' as const,
        country: 'UK',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 35,
        visaType: 'tourist' as const,
        targetCountry: 'UK',
        duration: '1_3_months' as const,
        sponsorType: 'self' as const,
        bankBalanceUSD: 12000,
        monthlyIncomeUSD: 2000,
        currentStatus: 'employed' as const,
        isStudent: false,
        isEmployed: true,
        hasInternationalTravel: true,
        previousVisaRejections: true, // Previous refusal
        previousOverstay: false,
        hasPropertyInUzbekistan: true, // Improved ties
        hasFamilyInUzbekistan: true,
        maritalStatus: 'married' as const,
        hasChildren: true, // Strong ties
        hasUniversityInvitation: false,
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: true,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 4000,
          financialSufficiencyRatio: 3.0, // 300% - strong
          savingsGrowth: 'increasing' as const,
        },
        employment: {
          employerName: 'Test Company',
          employmentDurationMonths: 36,
          employerStability: 'established_company' as const,
        },
        ties: {
          tiesStrengthScore: 0.8, // Strong ties
          tiesFactors: {
            property: 0.3,
            employment: 0.3,
            family: 0.2,
            children: 0.2,
          },
        },
      },
      riskScore: {
        probabilityPercent: 55,
        level: 'medium' as const,
        riskFactors: ['Previous visa refusal'],
        positiveFactors: [
          'Strong finances',
          'Strong ties',
          'Employed',
          'Has property',
          'Has children',
        ],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    baseDocuments: [
      { documentType: 'passport_international', category: 'required', required: true },
      { documentType: 'passport_photo', category: 'required', required: true },
      { documentType: 'visa_application_form', category: 'required', required: true },
      { documentType: 'bank_statements_applicant', category: 'required', required: true },
      { documentType: 'employment_letter', category: 'highly_recommended', required: false },
      { documentType: 'property_documents', category: 'highly_recommended', required: false },
      {
        documentType: 'refusal_explanation_letter',
        category: 'highly_recommended',
        required: false,
      },
      { documentType: 'travel_insurance', category: 'required', required: true },
    ],
    expectedConstraints: {
      mustNotAddDocuments: true,
      mustNotRemoveDocuments: true,
      mustProduceValidJson: true,
      shouldSetAppliesToThisApplicant: true,
      shouldGiveReasonIfApplies: true,
      minItems: 8,
    },
  },
  {
    id: 'checklist-005',
    name: 'US tourist vs Schengen tourist comparison',
    description: 'Compare checklist generation for US vs Schengen (different requirements)',
    subsystem: 'checklist',
    countryCode: 'ES',
    visaType: 'tourist',
    canonicalAIUserContext: {
      userProfile: {
        userId: 'test-user-005',
        appLanguage: 'en' as const,
        citizenship: 'UZ',
        age: 30,
      },
      application: {
        applicationId: 'test-app-005',
        visaType: 'tourist' as const,
        country: 'ES',
        status: 'draft' as const,
      },
      applicantProfile: {
        citizenship: 'UZ',
        age: 30,
        visaType: 'tourist' as const,
        targetCountry: 'ES',
        duration: '1_3_months' as const,
        sponsorType: 'self' as const,
        bankBalanceUSD: 6000,
        monthlyIncomeUSD: 1500,
        currentStatus: 'employed' as const,
        isStudent: false,
        isEmployed: true,
        hasInternationalTravel: true,
        previousVisaRejections: false,
        previousOverstay: false,
        hasPropertyInUzbekistan: true,
        hasFamilyInUzbekistan: true,
        maritalStatus: 'married' as const,
        hasChildren: false,
        hasUniversityInvitation: false,
        hasOtherInvitation: false,
        documents: {
          hasPassport: true,
          hasBankStatement: true,
          hasEmploymentOrStudyProof: true,
          hasInsurance: true,
          hasFlightBooking: false,
          hasHotelBookingOrAccommodation: false,
        },
        financial: {
          requiredFundsEstimate: 2000,
          financialSufficiencyRatio: 3.0,
          savingsGrowth: 'stable' as const,
        },
        ties: {
          tiesStrengthScore: 0.6,
          tiesFactors: {
            property: 0.3,
            employment: 0.2,
            family: 0.1,
            children: 0.0,
          },
        },
      },
      riskScore: {
        probabilityPercent: 75,
        level: 'high' as const,
        riskFactors: [],
        positiveFactors: ['Strong finances', 'Travel history', 'Employed', 'Has property'],
      },
      uploadedDocuments: [],
      appActions: [],
    },
    baseDocuments: [
      { documentType: 'passport_international', category: 'required', required: true },
      { documentType: 'passport_photo', category: 'required', required: true },
      { documentType: 'visa_application_form', category: 'required', required: true },
      { documentType: 'bank_statements_applicant', category: 'required', required: true },
      { documentType: 'travel_insurance', category: 'required', required: true }, // Required for Schengen
      { documentType: 'accommodation_proof', category: 'required', required: true }, // Required for Schengen
      { documentType: 'flight_reservation', category: 'highly_recommended', required: false },
      { documentType: 'employment_letter', category: 'highly_recommended', required: false },
    ],
    expectedConstraints: {
      mustNotAddDocuments: true,
      mustNotRemoveDocuments: true,
      mustProduceValidJson: true,
      shouldSetAppliesToThisApplicant: true,
      shouldGiveReasonIfApplies: true,
      minItems: 8,
    },
  },
];
