# Ketdik VPS Production Environment Variables
# 
# Copy this file to .env.production in the project root
# Replace all placeholder values with your actual production values
# 
# IMPORTANT: Never commit .env files to git!

# =============================================================================
# REQUIRED VARIABLES
# =============================================================================

# Server Configuration
NODE_ENV=production
PORT=4000

# Database (REQUIRED)
# This is your Railway Postgres connection string from Railway dashboard.
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
# Example Railway URL:
DATABASE_URL=postgresql://postgres:PASSWORD@containers-us-west-XXX.railway.app:5432/railway?sslmode=require
# 
# To get your Railway Postgres URL:
# 1. Go to Railway dashboard
# 2. Select your Postgres service
# 3. Go to "Variables" tab
# 4. Copy the DATABASE_URL value
#
# NOTE: If you want to use a local PostgreSQL database instead (not recommended for now),
# use: postgresql://ketdik_user:CHANGE_ME@localhost:5432/ketdik?schema=public

# Security (REQUIRED)
# Generate a strong secret: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_MINIMUM_32_CHARACTERS_LONG_SECRET_KEY

# =============================================================================
# WEB APP CONFIGURATION (REQUIRED)
# =============================================================================

# Backend API URL (REQUIRED)
# This should point to your Railway backend URL (same one used by mobile app)
# Example: https://your-backend-service.up.railway.app
# The web app will call: https://your-backend-service.up.railway.app/api/*
NEXT_PUBLIC_API_URL=https://your-backend-service.up.railway.app
#
# NOTE: Replace 'your-backend-service.up.railway.app' with your actual Railway backend URL
# This ensures web app uses the same backend as the mobile app for consistency

# =============================================================================
# CORS CONFIGURATION (REQUIRED for web app)
# =============================================================================

# Allowed origins for CORS (comma-separated)
# Must include your VPS web domain (if hosting web on VPS)
# Also keep any existing Railway/mobile origins
# Example:
CORS_ORIGIN=https://ketdik.uz,https://www.ketdik.uz,https://your-backend-service.up.railway.app
#
# NOTE: Add your VPS domain (ketdik.uz) to the existing CORS_ORIGIN in Railway backend
# Do NOT remove existing origins - just add the new VPS domain

# =============================================================================
# OPTIONAL BUT RECOMMENDED
# =============================================================================

# Redis (for caching and rate limiting)
# Uncomment if using Redis
# REDIS_URL=redis://localhost:6379
# OR: redis://user:password@host:6379

# Storage Configuration
STORAGE_TYPE=local
LOCAL_STORAGE_PATH=uploads

# Firebase Storage (if STORAGE_TYPE=firebase)
# FIREBASE_PROJECT_ID=your-project-id
# FIREBASE_PRIVATE_KEY=your-firebase-private-key-here
# FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com
# Note: FIREBASE_PRIVATE_KEY should be set in your actual .env file, not in this template

# OpenAI (for AI features)
# OPENAI_API_KEY=sk-...

# Google OAuth (for Google Sign-In)
# GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=your-google-client-secret

# Email Service (SendGrid or SMTP)
# SENDGRID_API_KEY=SG....
# OR use SMTP:
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# Payment Gateways (optional)
# STRIPE_SECRET_KEY=sk_live_...
# STRIPE_WEBHOOK_SECRET=whsec_...
# PAYME_MERCHANT_ID=...
# PAYME_API_KEY=...
# CLICK_MERCHANT_ID=...
# CLICK_API_KEY=...
# UZUM_MERCHANT_ID=...
# UZUM_API_KEY=...

# Frontend URL (for email links, CORS, etc.)
FRONTEND_URL=https://ketdik.uz

# Error Tracking (optional)
# SENTRY_DSN=https://...@sentry.io/...

# Logging
LOG_LEVEL=INFO
LOG_FILE_ENABLED=true
LOG_FILE_PATH=logs
LOG_FILE_MAX_SIZE=10485760
LOG_FILE_MAX_FILES=5

# =============================================================================
# NOTES
# =============================================================================
# 
# 1. Replace 'ketdik.uz' with your actual VPS domain name
# 2. Replace 'your-backend-service.up.railway.app' with your actual Railway backend URL
# 3. Generate JWT_SECRET: openssl rand -base64 32
# 4. DATABASE_URL: Use your Railway Postgres connection string (from Railway dashboard)
# 5. NEXT_PUBLIC_API_URL: Point to your Railway backend (same as mobile app uses)
# 6. CORS_ORIGIN: Add your VPS domain to existing Railway backend CORS settings
# 7. All NEXT_PUBLIC_* variables are exposed to the browser - never put secrets here
#
# IMPORTANT: This VPS deployment assumes:
# - Database: Railway Postgres (remote)
# - Backend: Railway (optional - can also run on VPS)
# - Web: VPS (this is what we're deploying)

